/*
* EASYDROPDOWN - A Dropdown Builder For Beautiful Inputs and Menus
* Version: 1.0
* License: Creative Commons Attribution 3.0 Unported - CC BY 3.0
* http://creativecommons.org/licenses/by/3.0/
* This software may be used freely on commercial and non-commercial projects with attribution to the author/copyright holder.
* Author: Patrick Kunka
* Copyright 2013 Patrick Kunka, All Rights Reserved
*/

(function(c){function e(){this.options=[];this.isField=!0;this.down=!1;this.maxHeight=0;this.cutOff=!1;this.wrapperClass="easydropdown"}e.prototype={constructor:e,init:function(a,b){var d=this;c.extend(d,b);d.$select=c(a);d.$select.find("option").each(function(a){var b=c(this);b.is(":selected")&&(d.selected={index:a,title:b.text()});d.options.push({domNode:b[0],title:b.text(),value:b.val(),selected:b.is(":selected")})});d.render()},render:function(){var a=this;a.$container=a.$select.wrap('<div class="'+
a.wrapperClass+'"/>').parent();a.$active=c('<span class="selected">'+a.selected.title+"</span>").appendTo(a.$container);a.$scrollWrapper=c('<div class="scroll-wrapper"><ul></ul></div>').appendTo(a.$container);a.$dropDown=a.$scrollWrapper.find("ul");c.each(a.options,function(){a.$dropDown.append("<li"+(this.selected?' class="active"':"")+">"+this.title+"</li>")});a.$items=a.$dropDown.find("li");console.info(a);for(i=0;i<a.$items.length;i++){var b=a.$items.eq(i);a.maxHeight+=b.outerHeight();if(a.cutOff==
i+1)break}a.bindHandlers()},bindHandlers:function(){var a=this;a.$container.on("click",function(){a.down?a.close():a.open()});c("body").on("click",function(b){!c(b.target).closest("."+a.wrapperClass).length&&a.down&&a.close()});a.$items.on("click",function(){var b=c(this).index();a.select(b)});if(a.isField)a.$select.on({focus:function(){a.$container.addClass("focus")},blur:function(){a.$container.removeClass("focus")}})},open:function(){var a=window.scrollX,b=window.scrollY;this.$select.focus();window.scrollTo(a,
b);this.$container.addClass("open");this.$scrollWrapper.css("height",this.maxHeight+"px");this.down=!0},close:function(){this.$select.blur();this.$container.removeClass("open");this.$scrollWrapper.css("height","0px");this.down=!1},select:function(a){this.$items.removeClass("active").eq(a).addClass("active");this.$active.text(this.options[a].title);this.$select.find("option").prop("selected",!1).eq(a).prop("selected","selected")}};c.fn.easyDropDown=function(a){return this.each(function(){(new e).init(this,
a)})}})(jQuery);